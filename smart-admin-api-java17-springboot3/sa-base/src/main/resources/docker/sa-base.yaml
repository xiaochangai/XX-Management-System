spring:
 # 数据库连接信息
 datasource:
 url: jdbc:p6spy:mysql://mysql:3306/smart_admin?autoReconnect=true&useServerPreparedStmts=false&rewriteBatchedStatements=true&characterEncoding=UTF-8&useSSL=false&allowMultiQueries=true&serverTimezone=Asia/Shanghai
 username: ${SPRING_DATASOURCE_USERNAME:admin}
 password: ${SPRING_DATASOURCE_PASSWORD:admin123}
 driver-class-name: com.p6spy.engine.spy.P6SpyDriver
 initial-size: 2
 min-idle: 2
 max-active: 10
 max-wait: 60000
 time-between-eviction-runs-millis: 60000
 min-evictable-idle-time-millis: 300000
 filters: stat
 druid:
 username: ${DRUID_USERNAME:admin}
 password: ${DRUID_PASSWORD:admin123}
 login:
 enabled: false
 method:
 pointcut: net.lab1024.sa..*Service.*

 # redis 连接池配置信息
 data:
 redis:
 database: 1
 host: ${SPRING_REDIS_HOST:redis}
 port: ${SPRING_REDIS_PORT:6379}
 password: ${SPRING_REDIS_PASSWORD:}
 timeout: 10000ms
 lettuce:
 pool:
 max-active: 5
 min-idle: 1
 max-idle: 3
 max-wait: 30000ms

 # 邮件，置以SSL的方式发送, 这个需要使用这种方式并且端口是465
 mail:
 enabled: false
 host: ${MAIL_HOST:smtp.example.com}
 port: ${MAIL_PORT:465}
 username: ${MAIL_USERNAME:}
 password: ${MAIL_PASSWORD:}
 test-connection: false
 properties:
 mail:
 smtp:
 auth: true
 ssl:
 enable: true
 socketFactory:
 class: com.sun.mail.util.MailSSLSocketFactory
 fallback: false
 debug: false

 # json序列化相关配置
 jackson:
 serialization:
 write-enums-using-to-string: true
 write-dates-as-timestamps: false
 deserialization:
 read-enums-using-to-string: true
 fail-on-unknown-properties: false
 default-property-inclusion: always
 date-format: yyyy-MM-dd HH:mm:ss
 time-zone: GMT+8

 # 上传文件和请求大小
 servlet:
 multipart:
 max-file-size: 20MB
 max-request-size: 10MB

 # 缓存实现类型
 cache:
 type: redis

# 健康检查
management:
 endpoints:
 web:
 exposure:
 include: health,info
 health:
 mail:
 enabled: false

# tomcat 配置，主要用于 配置 访问日志
server:
 tomcat:
 basedir: ${project.log-directory}/tomcat-logs
 accesslog:
 enabled: true
 max-days: 7
 pattern: "%t %{X-Forwarded-For}i %a %r %s (%D ms) %I (%B byte)"

# 文件上传 配置
file:
 storage:
 mode: local
 local:
 upload-path: /app/upload/
 url-prefix:
 cloud:
 region: oss-cn-hangzhou
 endpoint: oss-cn-hangzhou.aliyuncs.com
 bucket-name: smart-admin
 access-key:
 secret-key:
 url-prefix:
 private-url-expire-seconds: 3600

# open api配置
springdoc:
 swagger-ui:
 enabled: true
 doc-expansion: none
 tags-sorter: alpha
 server-base-url:
 api-docs:
 enabled: true
knife4j:
 enable: true
 basic:
 enable: false
 username: api
 password: ${API_DOC_PASSWORD:changeme}

# RestTemplate 请求配置 毫秒
http:
 pool:
 max-total: 20
 connect-timeout: 50000
 read-timeout: 50000
 write-timeout: 50000
 keep-alive: 300000

# 跨域配置
access-control-allow-origin: '*'

# 心跳配置
heart-beat:
 interval-seconds: 300

# 热加载配置
reload:
 interval-seconds: 300

# sa-token 配置
sa-token:
 token-name: Authorization
 token-prefix: Bearer
 timeout: 2592000
 active-timeout: -1
 is-concurrent: false
 is-share: false
 token-style: simple-uuid
 auto-renew: true
 is-log: true
 log-level: debug
 is-print: false
 is-read-cookie: false

# SmartJob 定时任务配置
smart:
 job:
 enabled: true
 init-delay: 10
 core-pool-size: 2
 db-refresh-enabled: true
 db-refresh-interval: 60
